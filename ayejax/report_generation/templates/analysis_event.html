{% if event.action == 'begin' %}
<div class="details">
  <strong>Starting Analysis</strong>
  <div class="details-grid">
    <div class="details-item"><strong>URL:</strong> {{ event.url }}</div>
    <div class="details-item"><strong>Query:</strong> {{ event.query }}</div>
  </div>
</div>
{% elif event.action == 'end' %}
<div class="details">
  <strong>Analysis Complete</strong>
  <div class="details-grid">
    <div class="details-item"><strong>Status:</strong> {{ event.status }}</div>
    {% if event.relevant_api_call %}
    <div class="details-item">
      <strong>API Call Found:</strong> {{ event.relevant_api_call }}
    </div>
    {% endif %} {% if event.message %}
    <div class="details-item">
      <strong>Message:</strong> {{ event.message }}
    </div>
    {% endif %}
  </div>
</div>
{% elif event.action == 'run-step' %}
<div class="details">
  <strong>Step {{ event.step_count }}</strong>
  <div class="details-grid">
    <div class="details-item"><strong>Status:</strong> {{ event.status }}</div>
    {% if event.status == 'success' %}
    <div class="details-item"><strong>Method:</strong> {{ event.method }}</div>
    <div class="details-item"><strong>URL:</strong> {{ event.url }}</div>
    {% if event.queries %}
    <div class="details-item">
      <strong>Queries:</strong>
      <div class="json-view">{{ event.queries | tojson(indent=2) }}</div>
    </div>
    {% endif %} {% if event.data %}
    <div class="details-item">
      <strong>Data:</strong>
      <div class="json-view">{{ event.data | tojson(indent=2) }}</div>
    </div>
    {% endif %} {% endif %} {% if event.exception %}
    <div class="details-item">
      <strong>Exception:</strong> {{ event.exception }}
    </div>
    {% endif %}
  </div>
</div>
{% endif %}
